CREATE MIGRATION m1x6q2hwbobi3zdojthf24yulma7o6rdwmqfxbed6rvfpypuaag3pa
    ONTO m15lpk2zq6mxn55c6spdb3ewy6v27ca4ltcpiye7bync7iw5gsn5sq
{
  DROP FUNCTION sys_app::getAppForm(formOwnerName: std::str, formName: std::str);
  ALTER TYPE sys_app::SysAppNodeObj {
      DROP EXTENDING sys_core::SysObj;
      EXTENDING sys_app::SysAppNodeType LAST;
  };
  ALTER TYPE sys_app::SysAppNodeObj {
      CREATE CONSTRAINT std::exclusive ON ((.owner, .name, .obj_type));
  };
  CREATE FUNCTION sys_app::getAppForm(formOwnerName: std::str, formName: std::str, formObjType: sys_app::SysAppNodeObjType) -> OPTIONAL sys_app::SysForm USING (SELECT
      sys_app::SysForm
  FILTER
      (((.owner = (SELECT
          sys_core::getEnt(formOwnerName)
      )) AND (.name = formName)) AND (.obj_type = formObjType))
  );
  ALTER TYPE sys_app::SysAppNode {
      ALTER PROPERTY order {
          RESET readonly;
          SET OWNED;
          RESET CARDINALITY;
          SET REQUIRED;
          SET TYPE default::non_negative;
      };
  };
  ALTER TYPE sys_app::SysAppProgram {
      ALTER PROPERTY order {
          RESET readonly;
          SET OWNED;
          RESET CARDINALITY;
          SET REQUIRED;
          SET TYPE default::non_negative;
      };
  };
  ALTER TYPE sys_app::SysAppNodeType {
      DROP PROPERTY order;
  };
};
