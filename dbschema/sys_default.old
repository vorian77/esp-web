module default {
  abstract type SysMgmt {
    required created_at: datetime {
      default := datetime_of_transaction();
      readonly := true;
    };

    required created_by: Person;
    
    modified_at: datetime {
      rewrite insert, update using (datetime_of_transaction())
    }
    
    required modified_by: Person;
  }

  scalar type Name extending str {
    constraint min_len_value(3);
  }

  abstract type Person {
    first_name: Name;
    last_name: Name;
    property full_name := .first_name ++ ' ' ++ .last_name;
  }

  type SysEnt extending SysMgmt {
    required name: Name {
      constraint exclusive;
    };   
  }
}
